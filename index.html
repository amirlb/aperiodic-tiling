<!DOCTYPE html>

<head>
    <link href="style.css" rel="stylesheet">
    <script src="squares.js"></script>
    <script src="triangles.js"></script>
</head>

<body>
    <svg width="100%" height="100%">
        <defs>
            <g id="square1">
                <path class="wide" d="M 50 0 C 50 28 72 50 100 50" />
                <path class="wide" d="M 0 50 C 28 50 50 72 50 100" />
                <path class="narrow" d="M 50 0 C 50 28 72 50 100 50" />
                <path class="narrow" d="M 0 50 C 28 50 50 72 50 100" />
            </g>
            <g id="square2">
                <path class="wide" d="M 50 0 C 50 28 28 50 0 50" />
                <path class="wide" d="M 40 100 C 40 65 65 40 100 40" />
                <path class="wide" d="M 60 100 C 60 75 75 60 100 60" />
                <path class="narrow" d="M 50 0 C 50 28 28 50 0 50" />
                <path class="narrow" d="M 40 100 C 40 65 65 40 100 40" />
                <path class="narrow" d="M 60 100 C 60 75 75 60 100 60" />
            </g>
            <g id="square3">
                <path class="wide" d="M 50 0 C 50 28 72 40 100 40" />
                <path class="wide" d="M 0 50 C 28 50 40 72 40 100" />
                <path class="wide" d="M 60 100 C 60 75 75 60 100 60" />
                <path class="narrow" d="M 50 0 C 50 28 72 40 100 40" />
                <path class="narrow" d="M 0 50 C 28 50 40 72 40 100" />
                <path class="narrow" d="M 60 100 C 60 75 75 60 100 60" />
            </g>
            <g id="square4">
                <path class="wide" d="M 50 0 C 50 28 72 40 100 40" />
                <path class="wide" d="M 0 60 C 28 60 50 72 50 100" />
                <path class="wide" d="M 0 40 C 50 40 50 60 100 60" />
                <path class="narrow" d="M 50 0 C 50 28 72 40 100 40" />
                <path class="narrow" d="M 0 60 C 28 60 50 72 50 100" />
                <path class="narrow" d="M 0 40 C 50 40 50 60 100 60" />
            </g>
            <g id="square5">
                <path class="wide" d="M 40 100 C 40 65 65 40 100 40" />
                <path class="wide" d="M 60 100 C 60 75 75 60 100 60" />
                <path class="wide" d="M 40 0 C 40 25 25 40 0 40" />
                <path class="wide" d="M 60 0 C 60 35 35 60 0 60" />
                <path class="narrow" d="M 40 100 C 40 65 65 40 100 40" />
                <path class="narrow" d="M 60 100 C 60 75 75 60 100 60" />
                <path class="narrow" d="M 40 0 C 40 25 25 40 0 40" />
                <path class="narrow" d="M 60 0 C 60 35 35 60 0 60" />
            </g>
            <g id="square6">
                <path class="wide" d="M 60 100 C 60 75 75 60 100 60" />
                <path class="wide" d="M 40 100 C 40 75 25 60 0 60" />
                <path class="wide" d="M 40 0 C 40 25 25 40 0 40" />
                <path class="wide" d="M 60 0 C 60 25 75 40 100 40" />
                <path class="narrow" d="M 60 100 C 60 75 75 60 100 60" />
                <path class="narrow" d="M 40 100 C 40 75 25 60 0 60" />
                <path class="narrow" d="M 40 0 C 40 25 25 40 0 40" />
                <path class="narrow" d="M 60 0 C 60 25 75 40 100 40" />
            </g>

            <g id="triangle1">
                <path class="wide" d="
                    M 54 0 C 54 15 40 39.3 27 46.8
                    M 48 83.2 C 61 75.7 89 75.7 102 83.2
                    M 96 0 C 96 15 110 39.3 123 46.8" />
                <path class="narrow" d="
                    M 54 0 C 54 15 40 39.3 27 46.8
                    M 48 83.2 C 61 75.7 89 75.7 102 83.2
                    M 96 0 C 96 15 110 39.3 123 46.8" />
            </g>
            <g id="triangle2">
                <path class="wide" d="
                    M 54 0 C 54 20 76.2 19.8 123 46.8
                    M 48 83.2 C 61 75.7 89 75.7 102 83.2" />
                <path class="narrow" d="
                    M 54 0 C 54 20 76.2 19.8 123 46.8
                    M 48 83.2 C 61 75.7 89 75.7 102 83.2" />
                <path class="wide" d="
                    M 96 0 C 96 20 73.8 19.8 27 46.8" />
                <path class="narrow" d="
                    M 96 0 C 96 20 73.8 19.8 27 46.8" />
            </g>
        </defs>

        <rect id="background" x="0" y="0" width="1" height="1" />
        <g id="tiles" class="hidden"></g>
    </svg>

    <script>
        "use strict";

        function randomOf(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        const SVG_NS = 'http://www.w3.org/2000/svg';
        const XLINK_NS = 'http://www.w3.org/1999/xlink';

        let timeout_id = null;

        function fill_tiles() {

            const bg = document.getElementById('background');
            bg.setAttribute('width', window.innerWidth);
            bg.setAttribute('height', window.innerHeight);

            const pattern = randomOf([fill_with_squares, fill_with_triangles]);
            pattern();

            setTimeout(function () {
                document.getElementById('tiles').classList.remove('hidden');
                if (timeout_id !== null) {
                    clearTimeout(timeout_id);
                }
                timeout_id = setTimeout(function () {
                    timeout_id = null;
                    document.getElementById('tiles').classList.add('hidden');
                    setTimeout(fill_tiles, 1000);
                }, 12000);
            }, 0);
        }

        setTimeout(function () {
            fill_tiles();
            window.addEventListener('resize', fill_tiles);
        }, 10);
    </script>
</body>

</html>